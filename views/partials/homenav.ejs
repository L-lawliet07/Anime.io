<script src="https://kit.fontawesome.com/ae068108e1.js" crossorigin="anonymous"></script>

<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container">

        <a class="navbar-brand" href="/">Anime.<span class="emphasis">io</span></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown"
            aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavDropdown">
            <ul class="navbar-nav navbar-nav ml-auto mt-2 mt-lg-0">

                <li class="nav-item active">
                    <a class="nav-link" href="/user/users">People <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="/user/friend">Friends <span class="sr-only">(current)</span></a>
                </li>

                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle unseenmessage-btn" href="#" id="navbarDropdownMenuLink"
                        role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <% if ( user.unseenMessage.length > 0 ) { %>
                        <i id="unseenmessage-icon" style="color: red;" class="fas fa-envelope"></i>
                        <% } else { %>
                        <i id="unseenmessage-icon" class="fas fa-envelope"></i>
                        <% } %>
                        <i class=""></i>
                    </a>
                    <div id="unseenmessage-container" class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                        <% if ( user.unseenMessage.length > 0 ) { %>
                        <% for ( let info of ( new Set(user.unseenMessage)) ) { %>
                        <a class="dropdown-item" href="/user/chat/<%= user.username %>-<%= info %>"><%= info %> send you
                            a
                            message.</a>
                        <% } %>
                        <% } else { %>
                        <a class="no-unseenMessage dropdown-item" href="">No new notification</a>
                        <% } %>
                    </div>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle notification-btn" href="#" id="navbarDropdownMenuLink"
                        role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <% if ( user.notification.length > 0 ) { %>
                        <i id="notification-icon" style="color: red;" class="fas fa-user-friends"></i>
                        <% } else { %>
                        <i id="notification-icon" class="fas fa-user-friends"></i>
                        <% } %>
                    </a>
                    <div id="notification-container" class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                        <% if ( user.notification.length > 0 ) { %>
                        <% for ( let info of ( new Set(user.notification)) ) { %>
                        <a class="dropdown-item" href="/user/profile/<%= info %>"><%= info %> started following you</a>
                        <% } %>
                        <% } else { %>
                        <a class="no-notification dropdown-item" href="">No new notification</a>
                        <% } %>
                    </div>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle emphasis" href="#" id="navbarDropdownMenuLink" role="button"
                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <img style="width: 20px;" id="main-image" src="/images/people/<%= user.image %>" alt=""
                            srcset="">
                        <span id="main-username"><%= user.username %></span>
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                        <a class="dropdown-item" href="/user/profile/<%= user.username %>"><i class="far fa-user"></i>
                            Profile</a>
                        <a class="dropdown-item" href="/user/setting"><i class="fas fa-cog"></i> Setting</a>
                        <a class="dropdown-item" id="logout-btn" href="#"><i class="fas fa-sign-out-alt"></i>
                            LogOut</a>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</nav>